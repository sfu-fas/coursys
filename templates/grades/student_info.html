{% extends "grades/base.html" %}
{% load grade_student %}

{% block title %}{{ course.name }}: Details for {{member.person.name}}{% endblock %}
{% block h1 %}{{ course.name }}: Details for {{member.person.name}}{% endblock %}

{% block grades_headextra %}
<script type="text/javascript">
    $(document).ready(function() {
	// activate dataTable ui
	oTable = $('#student_grades').dataTable({
	    "bJQueryUI": true,
	    "bPaginate": false,
            "bSort": false
	});
    });
</script>
{% endblock %}

{% block subbreadcrumbs %}<li>&gt; <a href="{{course.get_absolute_url}}">{{ course.name }}</a></li><li>&gt; Details for {{member.person.name}}</li>{% endblock %}

{% block content %}
<div class="table_container">
    <table class="info">
        <tbody>
	    <tr>
                <th class="ui-state-default">Last Name</th>
                <td>{{ member.person.last_name }}</td>
            </tr>
	    <tr>
                <th class="ui-state-default">First Name</th>
                <td>{{ member.person.first_name }}
                </td>
            </tr>
	    <tr>
                <th class="ui-state-default">Middle Name</th>
                <td>{{ member.person.middle_name }}</td>
            </tr>
	    <tr>
                <th class="ui-state-default">Student Number</th>
                <td>{{ member.person.emplid }}</td>
            </tr>
	    <tr>
                <th class="ui-state-default">Email Address</th>
                <td><a href="mailto:{{ member.person.email }}">{{ member.person.email }}</a></td>
            </tr>
        </tbody>
    </table>
</div>

<h2 id="grades">Grade Details</h2>
<div class="datatable_container">
    <table class="display" id="student_grades">
        <thead>
            <tr>
            <th scope="col">Activity</th>
            <th scope="col">Grade Status</th>
            <th scope="col">Grade</th>
            <th scope="col">Marking</th>
            <th scope="col">Submission</th>
            </tr>
	</thead>
        <tbody>
            {% for info in grade_info %}
            <tr>
              <td scope="row"><a href="{% url grades.views.activity_info course_slug=course.slug activity_slug=info.act.slug %}">{{info.act.name}}</a></td>
              
              <td>{% if info.grade %}{{info.grade.get_flag_display}}{% else %}no grade{% endif %}</td>
              
              {% if info.act.is_numeric %}
                <td><a href="{% url marking.views.change_grade_status course_slug=course.slug activity_slug=info.act.slug userid=member.person.userid %}">{% if info.grade %}{{info.grade.display_staff}}{% else %}&mdash;{% endif %}</a></td>
              {% else %}
                <td><a href="{% url marking.views.change_grade_status_lettergrade course_slug=course.slug activity_slug=info.act.slug userid=member.person.userid %}">{% if info.grade %}{{info.grade.display_staff}}{% else %}&mdash;{% endif %}</a></td>
              {% endif %}
              
              {% if info.marked %}
              <td><a href="{% url marking.views.mark_summary_student course_slug=course.slug activity_slug=info.act.slug userid=member.person.userid %}"><img src="{{MEDIA_URL}}icons/magnifier.png" title="View Detail" alt="View Detail" /></a></td>
              {% else %}
              <td><a href="{% url submission.views.take_ownership_and_mark course_slug=course.slug activity_slug=info.act.slug userid=member.person.userid %}?from_page={{from_page}}"><img src="{{MEDIA_URL}}icons/page_white_edit.png" title="Mark This" alt="Mark This"/></a></td>
              {% endif %}

              {% if info.sub %}
              <td><a href="{% url submission.views.show_student_submission_staff course_slug=course.slug activity_slug=info.act.slug userid=member.person.userid %}"><img src="{{MEDIA_URL}}icons/magnifier.png" title="{{info.act.name}} submission" alt="info" /></a>
              <a href="{% url submission.views.download_file course_slug=course.slug activity_slug=info.act.slug userid=member.person.userid %}"><img src="{{MEDIA_URL}}icons/page_compressed.png" title="download {{info.act.name}} submission" alt="Download" /></a></td>
              {% else %}
              <td></td>
              {% endif %}
            </tr>
	    {% empty %}
	    <tr>
		<td>No activity</td>
		<td></td>
		<td></td>
		<td></td>
	    </tr>
            {% endfor %}
        </tbody>
    </table>
</div>



{% endblock %}
