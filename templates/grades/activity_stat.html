{% extends "grades/base.html" %}

{% block title %}{{ activity.name }} Statistics{% endblock %}
{% block h1 %}{{ activity.name }} Statistics{% endblock %}

{% block subbreadcrumbs %}{% spaceless %}
<li>&gt; <a href="{{course.get_absolute_url}}">{{ course.name }}</a></li>
<li>&gt; <a href="{{activity.get_absolute_url}}">{{ activity.name }}</a></li>
<li>&gt; Statistics</li>
{% endspaceless %}{% endblock %}

{% block grades_headextra %}
<link rel="stylesheet" href="{{MEDIA_URL}}visualize/css/visualize.css" type="text/css" />
<!--[if IE]><script type="text/javascript" src="{{MEDIA_URL}}visualize/excanvas.compiled.js"></script><![endif]-->
<script type="text/javascript" src="{{MEDIA_URL}}visualize/visualize.jQuery.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
	$("table.data").hide();
        $("table.data").visualize({'height': '300px', appendTitle: false, appendKey: false});
    });
</script>
{% endblock %}

{% block content %}

{% if activity_stat.count %}
	{% if display_summary %}
		{% if activity_stat %}
		<h2 id="summary">Summary Statistics</h2>
		{% if activity.is_numeric %}
		<div class="table_container">
    		<table class="info">
        	<tbody>
            		<tr>
                		<th class="ui-state-default">Mean Grade</th>
                		<td>{{ activity_stat.average }}</td>
            		</tr>
            		<tr>
           		     	<th class="ui-state-default">Median Grade</th>
                		<td>{{ activity_stat.median }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Standard Deviation</th>
                		<td>{{ activity_stat.stddev }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Minimum Grade</th>
                		<td>{{ activity_stat.min }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Maximum Grade</th>
                		<td>{{ activity_stat.max }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Grades Received</th>
                		<td>{{ activity_stat.count }}</td>
            		</tr>
        	</tbody>
    		</table>
		</div>
		{% else %}
		<div class="table_container">
    		<table class="info">
        	<tbody>
            		<tr>
                		<th class="ui-state-default">Median Grade</th>
                		<td>{{ activity_stat.median }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Minimum Grade</th>
                		<td>{{ activity_stat.min }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Maximum Grade</th>
                		<td>{{ activity_stat.max }}</td>
            		</tr>
            		<tr>
                		<th class="ui-state-default">Grades Received</th>
                		<td>{{ activity_stat.count }}</td>
            		</tr>
        	</tbody>
    		</table>
		</div>
		{% endif %}
	{% endif %}{% endif %}
{% else %}
	<p>Summary statistics is not available: no grades assigned.</p>
{% endif %}

<h2 id="submark">Submissions and Grades</h2>
<div class="table_container">
<table class="info">
<tbody>
  <tr>
    <th class="ui-state-default">Submissions</th>
    {% if submark_stat.submittable %}
      <td>
      {% if activity.group %}
      {{ submark_stat.groupsubmissons }} (group submissions)
      {% else %}
      {{ submark_stat.studentsubmissons }}
      {% endif %}
      </td>
    {% else %}
      <td class="empty">not configured</td>
    {% endif %}
  </tr>
  <tr>
    <th class="ui-state-default">Detailed Marks Given</th>
    {% if submark_stat.markable %}
      <td>
      {% if activity.group %}
      {{ submark_stat.groupmarks }} (group marks){% if submark_stat.studentmarks %},
        {{ submark_stat.studentmarks }} (to individuals){% endif %}
      {% else %}
      {{ submark_stat.studentmarks }}
      {% endif %}
      </td>
    {% else %}
      <td class="empty">not configured</td>
    {% endif %}
  </tr>
</tbody>
</table>
</div>

{% if activity_stat.count %}
<h2 id="histo">Histogram</h2>
<table class="data info" style="width: 550px; border-collapse: collapse;">
    <caption>Grade Range</caption>
    {% if activity.is_numeric %}
    <thead>
	<tr>
	    <td></td>
	    {% for grade_range_stat in activity_stat.grade_range_stat_list %}
	    <th scope="col">{{ grade_range_stat.grade_range }}</th>
	    {% endfor %}
	</tr>
    </thead>
    <tbody>
	<tr>
	    <th scope="row">{{ activity.name }}</th>
	    {% for grade_range_stat in activity_stat.grade_range_stat_list %}
	    <td>{{ grade_range_stat.stud_count }}</td>
	    {% endfor %}
	</tr>
    </tbody>
    {% else %}
    <thead>
	<tr>
	    <td></td>
	    {% for grade_range_stat in activity_stat.grade_range_stat_list %}
	    <th scope="col">{{ grade_range_stat.grade_range }}</th>
	    {% endfor %}
	</tr>
    </thead>
    <tbody>
	<tr>
	    <th scope="row">{{ activity.name }}</th>
	    {% for grade_range_stat in activity_stat.grade_range_stat_list %}
	    <td>{{ grade_range_stat.stud_count }}</td>
	    {% endfor %}
	</tr>
    </tbody>
    {% endif%}
</table>
{% endif %}


{% endblock %}

