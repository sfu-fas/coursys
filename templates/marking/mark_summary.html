{% extends "marking/base.html" %}

{% block title %}Marking Summary{% endblock %}

{% block h1 %} Marking Summary {% endblock %}

{% block subbreadcrumbs %}<li>&gt; <a href="{% url grades.views.course_info course_slug=course.slug %}">{{course}}</a></li><li>&gt; <a href="{% url grades.views.activity_info course_slug=course.slug activity_slug=activity.slug %}">{{activity.name}}</a></li>{% endblock %}

{% block content %}
<h2>
Student {{student.userid}} marked on {{activity.name}} 
</h2>

<h2>Basic Information</h2>
<div class="table_container">
	<table class="info">
	<tbody> 
		 <tr>
	    	<th class="ui-state-default">Marked by</th>
	        <td>
	            {{ activity_mark.created_by }}
	        </td>
	    </tr>
	    <tr>
	    	<th  class="ui-state-default">Time</th>
	        <td>
	            {{activity_mark.created_at|date:"Y M d D"}} {{activity_mark.created_at|time:"H:i:s"}}
	        </td>
	    </tr>
	    <tr>
	    	<th  class="ui-state-default">Total Mark</th>
	        <td>
	            {{ activity_mark.mark }} out of {{activity.max_grade}}
	        </td>
	    </tr>   
	    <tr>
	    	<th  class="ui-state-default">Mark Approach</th>
	        <td>
	            {% if group %}
	            Via group <a href="#">{{group.name}}</a>
	            {% else %}
	            Directly to individual
	            {% endif %}
	        </td>
	    </tr>     
	</tbody>
	</table>
</div>


<h2> Components Details </h2>
{% for component_mark in component_marks %}
<div class="table_container">
    <table class="info">
    <tbody>
	    <tr>
	    	<th class="ui-state-default">Component</th>
	        <td>
	            {{ component_mark.activity_component.title }}
	        </td>
	    </tr>
	    <tr>
	    	<th  class="ui-state-default">Comment</th>
	        <td>
	            {{ component_mark.comment }}
	        </td>
	    </tr>
	    <tr>
	    	<th  class="ui-state-default">Mark</th>
	        <td>
	            {{ component_mark.value }} out of {{ component_mark.activity_component.max_mark }}
	        </td>
	    </tr>    
    </tbody>
    </table>
</div>
{% empty %}
<h3>No records on component marks found</h3>
{% endfor %}


<h2> Additional </h2>
<div class = "table_container">
	<table class="info">
	<tbody>
	    <tr>
	       <th class="ui-state-default">Overall comment</th>
	       <td> 
		      {{ activity_mark.overall_comment }}	
           </td>
        </tr>    
		<tr>
		  <th class="ui-state-default">Late Penalty</th>
		  <td> 
			 {{ activity_mark.late_penalty }}	
	      </td>
	    </tr>
	    <tr>
		  <th class="ui-state-default">Adjustment Mark</th>
		  <td> 
			 {{ activity_mark.mark_adjustment }}
	      </td>
	    </tr>
	    <tr>
		  <th class="ui-state-default">Adjustment Mark Reason</th>
		  <td> 
			 {{ activity_mark.mark_adjustment_reason }}	
	      </td>
	    </tr>
	    <tr>
		  <th class="ui-state-default">File Attachment</th>
		  {% if activity_mark.file_attachment %}
		    <td>
		    <a href = "{% url marking.views.download_marking_attachment course_slug=course.slug, activity_slug=activity.slug, filepath=activity_mark.file_attachment%}"><img src="{{MEDIA_URL}}icons/download.png" title="Download" alt="Download" /></a>		    
		    </td>
		  {% else %}
		  	<td>no attachment</td>
	      {% endif %}
	    </tr>
    </tbody>
    </table>
</div>   

<a class="button" href= "{% url submission.views.take_ownership_and_mark course_slug=course.slug activity_slug=activity.slug userid=student.userid %}?base_activity_mark={{activity_mark.id}}">Mark based on this</a>

{% if view_history %}
	<a class="button" href = "{% url marking.views.mark_history course_slug=course.slug, activity_slug=activity.slug, userid=student.userid %}">Marking History</a>
{% endif %}	
{% endblock %}
