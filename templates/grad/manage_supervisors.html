{% extends "base.html" %}
{% load markup %}
{% load mobile_tags %}
{% load form_display %}

{% block actions %}
<div id="actions">
<h2>Actions</h2>
<ul>
<li><a href="{% url grad.views.view_all grad_slug=grad.slug %}">View All Info</a></li>	
<li class="newsec"><a href="{% url grad.views.manage_academics grad_slug=grad.slug %}">Manage Academics</a></li>
<li><a href="{% url grad.views.manage_requirements grad_slug=grad.slug  %}">Manage Requirements</a></li>
<li><a href="{% url grad.views.manage_status grad_slug=grad.slug  %}">Manage Status</a></li>
</ul>
</div>
{% endblock %}

{% block title %}{{page_title}}{% endblock %}
{% block h1 %}{{page_title}}{% endblock %}

{% block subbreadcrumbs %}
<li>
	&gt; <a href="{% url grad.views.index %}">Grad</a>
</li>
<li>
	&gt;<a href="{% url grad.views.view_all grad_slug=grad.slug%}"> {{crumb}}</a>
</li>
<li>
	&gt; Supervisors
</li>
{% endblock %}

{% block headextra %}
<script type="text/javascript">
	function add(){
		$("#supervisor-forms").append($("supervisor-form-0").clone(true))
	}
	function update(id) {
		$.ajax({
			url : '{% url grad.views.manage_supervisors grad_slug=grad.slug %}',
			success : function(data) {
				if(console && console.log) {
					console.log(data);
				}
			}
		});
	}
</script>
{% endblock %}

{% block content %}
<div class="table_container">
	<table class="info">
		<tbody>
			{% for field, value in gp %}
			<tr>
				<th><label>{{field}} :</label></th>
				<td> {{ value }} </td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
<div id="form_container">
	<form  method="POST">
		{% csrf_token %}
		<fieldset>
			<legend>
				Potential Supervisor
			</legend>
			{{ potential_supervisors_form|as_dl_2 }}
			<p>
				<input class="submit" type="submit" value="Update">
			</p>
		</fieldset>
	</form>
</div>
<div id="form_container">
	<form method="POST">
		{% csrf_token %}
		{{ supervisors_formset.management_form }}
		<fieldset>
			<legend>
				Supervisors
			</legend>
			<p>
				Choose only a Supervisor or enter an External.
			</p>
			<div id="supervisor-forms">
			{% for form in supervisors_formset %}
				<div id="supervisor-form-{{forloop.counter0}}">
					<p>Supervisor {{forloop.counter}}:</p>
					{{ form.as_p }}
				</div>
			
			{% endfor %}
			</div>
			<p id="form_btns">
				<input id="addBtn" class="submit" type="button" value="Please Enable Javascript" />
				<input class="submit" type="submit" value="Update">
			</p>
		</fieldset>
	</form>
	<a class="button" href="{% url grad.views.view_all grad_slug=grad.slug %}">Cancel</a>
</div>
<script type="text/javascript">
	$(function() {
		$("#addBtn").remove()
		$("#form_btns").append('<input class="submit" type="button" value="Add Another" onclick="add()"/>')
	});

</script>
{% endblock %} 
