{% extends "base.html" %}
{% load getattribute %}

{% block headextra %}
<script type="text/javascript">
	$(document).ready(function() {
		$('#grads').dataTable({
			"bJQueryUI" : true,
			"aaSorting" : [[4, "desc"]],
			"iDisplayLength" : 50,
			"sPaginationType" : "full_numbers",
		});
	});

</script>
<style type="text/css">
#actions li label {
padding: 3px 0.2em 3px 0.8em;
}
#actions li input {
margin: 3px 0 3px 0;
width: 120px;
}
</style>
{% endblock %}

{% block title %}Grad Student Search Results{% endblock %}
{% block h1 %}Grad Student Search Results{% endblock %}

{% block actions %}
<div id="actions">
<h2>Save this Search</h2>
<form id="searchform" action="{% url grad.views.save_search %}" method="post">
<ul>
{{ saveform.as_ul }}
</ul>
{% csrf_token %}

<input id="submitbutton" class="submit"  type="submit" value="{% if saveform.instance.pk %}Update{% else %}Save{% endif %}" />
{% if saveform.instance.pk %}
<input id="deletebutton" class="submit"  type="submit" value="Delete" formaction="{% url grad.views.delete_savedsearch %}" />
{% endif %}
</form>

</div>
{% endblock %}

{% block subbreadcrumbs %}
<li>
	&gt; <a href="{% url grad.views.index %}">Grad</a>
</li>
<li>
	&gt; <a href="{% url grad.views.search %}">Search</a>
</li>
<li>
	&gt; Search Results
</li>
{% endblock %}

{% block content %}
{% if saveform.instance.pk %}
<p>This search is saved as "{{saveform.instance.name}}".</p>
{% endif %}

<div class="datatable_container">
	<table class="display" id="grads">
		<thead>
			<tr>
            {% for c in columns %}
                <th>{{ c }}</th>
            {% endfor %}
				<th>Manage</th>
			</tr>
		</thead>
		<tbody>
			{% for s in grads %}
            <tr>
            {% for c in columns %}
                <td>{{s|getattribute:c}}</td>
            {% endfor %}
                <td><a href="{% url grad.views.view_all grad_slug=s.slug %}"> View </a></td>
            </tr>
			{%empty%}
			<tr>
				<td>
				<p class="empty">
					There are no grad student records that match your search.
				</p></td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% endblock %} 