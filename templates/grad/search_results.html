{% extends "base.html" %}
{% load getattribute %}

{% block headextra %}
<link rel="stylesheet" href="{{MEDIA_URL}}style/print.css" media="print" />
<script type="text/javascript">
	$(document).ready(function() {
		$('#grads').dataTable({
			"bJQueryUI" : true,
			"iDisplayLength" : 50,
			"sPaginationType" : "full_numbers",
		});
	});

</script>
<style type="text/css">
#actions li label {
padding: 3px 0.2em 3px 0.8em;
}
#actions li input {
margin: 3px 0 3px 0;
width: 120px;
}
</style>
{% endblock %}

{% block title %}Grad Student Search Results{% endblock %}
{% block h1 %}Grad Student Search Results{% endblock %}

{% block subbreadcrumbs %}
<li>&gt; <a href="{% url grad.views.index %}">Grad</a></li>
<li>&gt; <a href="{% url grad.views.search %}">Search</a></li>
<li>&gt; Results</li>
{% endblock %}

{% block actions %}
<div id="actions">
	<h2>Actions</h2>
	<ul>
	<li><a href="{{ csv_link }}">Export as CSV</a></li>
	</ul>
</div>
{% endblock %}

{% block content %}

<form id="searchform" action="{% url grad.views.save_search %}" method="post" class="noprint">{% csrf_token %}
<p>
{{ saveform.person }}{{ saveform.query }}{{ saveform.name.label }} {{ saveform.name }}

<input id="submitbutton" type="submit" value="{% if saveform.instance.pk %}Update{% else %}Save{% endif %}" />
{% if saveform.instance.pk %}
<input id="deletebutton" type="submit" value="Delete" formaction="{% url grad.views.delete_savedsearch %}" />
{% endif %}
</p>
</form>

<div class="datatable_container">
	<table class="display" id="grads">
		<thead>
			<tr>
            {% for c in human_readable_column_headers %}
                <th>{{ c }}</th>
            {% endfor %}
				<th class="noprint">Manage</th>
			</tr>
		</thead>
		<tbody>
			{% for s in grads %}
            <tr>
            {% for c in columns %}
                <td>{{s|getattribute:c}}</td>
            {% endfor %}
                <td class="noprint"><a href="{% url grad.views.view grad_slug=s.slug %}">View</a></td>
            </tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% endblock %} 
